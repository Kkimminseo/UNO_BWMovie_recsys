<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>AI ì±„íŒ…</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 500px; margin: auto; }
        #chat-container { border: 1px solid #ddd; padding: 10px; height: 400px; overflow-y: auto; }
        .message { padding: 5px; margin: 5px 0; border-radius: 5px; }
        .user { background: #007bff; color: white; text-align: right; }
        .bot { background: #eee; text-align: left; }
        input { width: 100%; padding: 10px; margin-top: 10px; }
    </style>
</head>
<body>

<h2>AI ì±„íŒ…</h2>
<div id="chat-container"></div>
<input id="message-input" type="text" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." />

<script>
    const socket = new WebSocket("ws://127.0.0.1:8000/ws/chat/");

    socket.onopen = function () {
        console.log("âœ… WebSocket ì—°ê²° ì„±ê³µ!");
        addMessage("AI", "ì•ˆë…•í•˜ì„¸ìš”! ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”.", "bot");
    };

    socket.onmessage = function (event) {
        const data = JSON.parse(event.data);
        addMessage("AI", data.response, "bot");  // âœ… OpenAI GPT-4o ì‘ë‹µ ì¶”ê°€
    };

    document.getElementById("message-input").addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
            const message = e.target.value;
            if (message.trim()) {
                addMessage("ë‚˜", message, "user");  // âœ… ì‚¬ìš©ìê°€ ì…ë ¥í•œ ë©”ì‹œì§€ í‘œì‹œ
                console.log("ğŸ“¤ WebSocket ì „ì†¡:", message);
                socket.send(JSON.stringify({ message: message }));  // âœ… WebSocketì„ í†µí•´ ì„œë²„ë¡œ ì „ì†¡
                e.target.value = "";
            }
        }
    });

    function addMessage(sender, text, type) {
        const chatContainer = document.getElementById("chat-container");
        const messageElement = document.createElement("div");
        messageElement.className = "message " + type;
        messageElement.innerText = sender + ": " + text;
        chatContainer.appendChild(messageElement);
        chatContainer.scrollTop = chatContainer.scrollHeight;  // âœ… ìë™ ìŠ¤í¬ë¡¤
    }
</script>

</body>
</html>
